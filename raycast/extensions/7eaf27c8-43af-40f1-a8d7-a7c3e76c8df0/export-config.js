"use strict";var d=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var K=Object.prototype.hasOwnProperty;var R=(e,o)=>{for(var n in o)d(e,n,{get:o[n],enumerable:!0})},I=(e,o,n,r)=>{if(o&&typeof o=="object"||typeof o=="function")for(let a of S(o))!K.call(e,a)&&a!==n&&d(e,a,{get:()=>o[a],enumerable:!(r=k(o,a))||r.enumerable});return e};var O=e=>I(d({},"__esModule",{value:!0}),e);var U={};R(U,{default:()=>G});module.exports=O(U);var i=require("@raycast/api"),u=require("react");var f=require("@raycast/api");function w(e){return e.type==="group"}var C="leader-key-config",P="key-mappings",T=1,D=process.platform==="win32"?"windows":"mac",E={mac:{browser:{label:"Safari",value:"/Applications/Safari.app"},fileManager:{label:"Finder",value:"/System/Library/CoreServices/Finder.app"},terminal:{label:"Terminal",value:"/System/Applications/Utilities/Terminal.app"},calculator:{label:"Calculator",value:"/System/Applications/Calculator.app"},notes:{label:"Notes",value:"/System/Applications/Notes.app"}},windows:{browser:{label:"Edge",value:"msedge.exe"},fileManager:{label:"Explorer",value:"explorer.exe"},terminal:{label:"Command Prompt",value:"cmd.exe"},calculator:{label:"Calculator",value:"calc.exe"},notes:{label:"Notepad",value:"notepad.exe"}}},c=E[D],m={type:"group",actions:[{id:"default-a",key:"a",type:"group",label:"Applications",actions:[{id:"default-ab",key:"b",type:"application",label:c.browser.label,value:c.browser.value},{id:"default-at",key:"t",type:"application",label:c.terminal.label,value:c.terminal.value},{id:"default-af",key:"f",type:"application",label:c.fileManager.label,value:c.fileManager.value},{id:"default-ac",key:"c",type:"application",label:c.calculator.label,value:c.calculator.value},{id:"default-an",key:"n",type:"application",label:c.notes.label,value:c.notes.value}]},{id:"default-u",key:"u",type:"group",label:"URLs",actions:[{id:"default-ug",key:"g",type:"url",label:"Google",value:"https://google.com"},{id:"default-uh",key:"h",type:"url",label:"GitHub",value:"https://github.com"}]}]};async function N(){let e=await f.LocalStorage.getItem(C);if(!e){let o=await J();return o||(await v(m),m)}try{return JSON.parse(e).root}catch{return m}}async function v(e){let o={root:e,version:T};await f.LocalStorage.setItem(C,JSON.stringify(o))}function M(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}async function J(){let e=await f.LocalStorage.getItem(P);if(!e)return null;try{let n=JSON.parse(e).mappings;if(!n||n.length===0)return null;let r={type:"group",actions:[]},a=new Map,y=n.filter(t=>t.isGroup&&!t.action);for(let t of y){let s={id:t.id,key:t.sequence,type:"group",label:t.groupName||t.label,actions:[]};a.set(t.sequence,s)}for(let t of n){if(t.isGroup&&!t.action||!t.action)continue;let s={id:t.id,key:t.sequence.length>1?t.sequence.slice(-1):t.sequence,type:F(t.action.type),label:t.label,value:t.action.target};if(t.sequence.length>1){let l=t.sequence.slice(0,-1),b=a.get(l);if(b)b.actions.push(s);else{let g=a.get(l);g||(g={id:M(),key:l,type:"group",label:l.toUpperCase(),actions:[]},a.set(l,g)),g.actions.push(s)}}else r.actions.push(s)}for(let t of a.values())t.key.length===1&&r.actions.push(t);return await v(r),r}catch{return null}}function F(e){switch(e){case"app":return"application";case"url":case"raycast":return"url";case"file":return"folder";case"shell":return"command";default:return"application"}}function q(e){function o(n){if(w(n)){let r={key:n.key,type:"group",actions:n.actions.map(o)};return n.label&&(r.label=n.label),n.browser&&(r.browser=n.browser),r}else{let r=n,a={key:r.key,type:r.type,value:r.value};return r.label&&(a.label=r.label),r.browser&&(a.browser=r.browser),a}}return{type:"group",actions:e.actions.map(o)}}async function A(){let e=await N(),o=q(e);return JSON.stringify(o,null,2)}var x=require("fs"),L=require("path"),h=require("os"),p=require("react/jsx-runtime");function G(){let[e,o]=(0,u.useState)(""),[n,r]=(0,u.useState)(!0);(0,u.useEffect)(()=>{async function s(){let l=await A();o(l),r(!1)}s()},[]);async function a(){await i.Clipboard.copy(e),await(0,i.showToast)({style:i.Toast.Style.Success,title:"Copied to clipboard"})}async function y(){try{let s=(0,L.join)((0,h.homedir)(),"Downloads","leader-key-config.json");(0,x.writeFileSync)(s,e,"utf-8"),await(0,i.showToast)({style:i.Toast.Style.Success,title:"Saved to Downloads",message:"leader-key-config.json"})}catch(s){let l=s instanceof Error?s.message:"Unknown error";await(0,i.showToast)({style:i.Toast.Style.Failure,title:"Failed to save",message:l})}}let t=n?"Loading...":`# Leader Key Config

This config is compatible with the [Leader Key app](https://github.com/mikker/LeaderKey).

\`\`\`json
${e}
\`\`\``;return(0,p.jsx)(i.Detail,{isLoading:n,markdown:t,actions:(0,p.jsxs)(i.ActionPanel,{children:[(0,p.jsx)(i.Action,{title:"Copy to Clipboard",onAction:a}),(0,p.jsx)(i.Action,{title:"Save to Downloads",onAction:y})]})})}
