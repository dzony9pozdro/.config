"use strict";var Z=Object.defineProperty;var Ce=Object.getOwnPropertyDescriptor;var ve=Object.getOwnPropertyNames;var Ge=Object.prototype.hasOwnProperty;var Te=(e,o)=>{for(var n in o)Z(e,n,{get:o[n],enumerable:!0})},ke=(e,o,n,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of ve(o))!Ge.call(e,i)&&i!==n&&Z(e,i,{get:()=>o[i],enumerable:!(c=Ce(o,i))||c.enumerable});return e};var Le=e=>ke(Z({},"__esModule",{value:!0}),e);var Xe={};Te(Xe,{default:()=>ye});module.exports=Le(Xe);var t=require("@raycast/api"),A=require("react");function v(e){return e.type==="group"}var Y=require("@raycast/api");var se="leader-key-config",Pe="key-mappings",Re=1,xe=process.platform==="win32"?"windows":"mac",De={mac:{browser:{label:"Safari",value:"/Applications/Safari.app"},fileManager:{label:"Finder",value:"/System/Library/CoreServices/Finder.app"},terminal:{label:"Terminal",value:"/System/Applications/Utilities/Terminal.app"},calculator:{label:"Calculator",value:"/System/Applications/Calculator.app"},notes:{label:"Notes",value:"/System/Applications/Notes.app"}},windows:{browser:{label:"Edge",value:"msedge.exe"},fileManager:{label:"Explorer",value:"explorer.exe"},terminal:{label:"Command Prompt",value:"cmd.exe"},calculator:{label:"Calculator",value:"calc.exe"},notes:{label:"Notepad",value:"notepad.exe"}}},K=De[xe],ee={type:"group",actions:[{id:"default-a",key:"a",type:"group",label:"Applications",actions:[{id:"default-ab",key:"b",type:"application",label:K.browser.label,value:K.browser.value},{id:"default-at",key:"t",type:"application",label:K.terminal.label,value:K.terminal.value},{id:"default-af",key:"f",type:"application",label:K.fileManager.label,value:K.fileManager.value},{id:"default-ac",key:"c",type:"application",label:K.calculator.label,value:K.calculator.value},{id:"default-an",key:"n",type:"application",label:K.notes.label,value:K.notes.value}]},{id:"default-u",key:"u",type:"group",label:"URLs",actions:[{id:"default-ug",key:"g",type:"url",label:"Google",value:"https://google.com"},{id:"default-uh",key:"h",type:"url",label:"GitHub",value:"https://github.com"}]}]};async function ce(){let e=await Y.LocalStorage.getItem(se);if(!e){let o=await Fe();return o||(await O(ee),ee)}try{return JSON.parse(e).root}catch{return ee}}async function O(e){let o={root:e,version:Re};await Y.LocalStorage.setItem(se,JSON.stringify(o))}async function le(e,o,n){let c=structuredClone(e),i=E(c,o);return i&&i.actions.push(n),c}async function pe(e,o,n){let c=structuredClone(e),i=o.slice(0,-1),s=o[o.length-1],a=i.length===0?c:E(c,i);if(a){let f=a.actions.findIndex(h=>h.id===s);f!==-1&&(a.actions[f]={...a.actions[f],...n})}return c}async function ue(e,o){let n=structuredClone(e),c=o.slice(0,-1),i=o[o.length-1],s=c.length===0?n:E(n,c);return s&&(s.actions=s.actions.filter(a=>a.id!==i)),n}function E(e,o){if(o.length===0)return e;let[n,...c]=o,i=e.actions.find(s=>s.id===n);return!i||!v(i)?null:c.length===0?i:E(i,c)}function ae(e,o){if(o.length===0)return null;let n=o.slice(0,-1),c=o[o.length-1],i=n.length===0?e:E(e,n);return i&&i.actions.find(s=>s.id===c)||null}function q(e,o){let n=ae(e,o);if(n&&!v(n)&&n.browser)return n.browser;for(let c=o.length-1;c>=1;c--){let i=o.slice(0,c),s=ae(e,i);if(s&&v(s)&&s.browser)return s.browser}}function W(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}function te(e,o,n){for(let c of e.actions)if(!(n&&c.id===n)&&c.key===o)return{hasConflict:!0,conflictLabel:c.label||(c.type==="group"?"a group":c.value)};return{hasConflict:!1,conflictLabel:""}}async function Fe(){let e=await Y.LocalStorage.getItem(Pe);if(!e)return null;try{let n=JSON.parse(e).mappings;if(!n||n.length===0)return null;let c={type:"group",actions:[]},i=new Map,s=n.filter(a=>a.isGroup&&!a.action);for(let a of s){let f={id:a.id,key:a.sequence,type:"group",label:a.groupName||a.label,actions:[]};i.set(a.sequence,f)}for(let a of n){if(a.isGroup&&!a.action||!a.action)continue;let f={id:a.id,key:a.sequence.length>1?a.sequence.slice(-1):a.sequence,type:Ke(a.action.type),label:a.label,value:a.action.target};if(a.sequence.length>1){let h=a.sequence.slice(0,-1),m=i.get(h);if(m)m.actions.push(f);else{let w=i.get(h);w||(w={id:W(),key:h,type:"group",label:h.toUpperCase(),actions:[]},i.set(h,w)),w.actions.push(f)}}else c.actions.push(f)}for(let a of i.values())a.key.length===1&&c.actions.push(a);return await O(c),c}catch{return null}}function Ke(e){switch(e){case"app":return"application";case"url":case"raycast":return"url";case"file":return"folder";case"shell":return"command";default:return"application"}}var G=require("@raycast/api"),fe=require("child_process"),de=require("util"),Ee=(0,de.promisify)(fe.exec);async function _(e,o,n){let{type:c,value:i,label:s}=e;try{switch(await(0,G.closeMainWindow)(),c){case"application":await Oe(i);break;case"url":await Me(i,n);break;case"folder":await Ne(i);break;case"command":await Ve(i);break}await(0,G.showHUD)(`\u2713 ${s||i}`)}catch(a){let f=a instanceof Error?a.message:"Unknown error";await(0,G.showToast)({style:G.Toast.Style.Failure,title:"Action Failed",message:f})}finally{o&&o()}}async function Oe(e){await(0,G.open)(e)}async function Me(e,o){o&&!e.startsWith("raycast://")?await(0,G.open)(e,o):await(0,G.open)(e)}async function Ne(e){await(0,G.open)(e)}async function Ve(e){await Ee(e)}function R(e){switch(e){case"application":return G.Icon.AppWindow;case"url":return G.Icon.Globe;case"folder":return G.Icon.Folder;case"command":return G.Icon.Terminal;case"group":return G.Icon.Folder}}function M(e){switch(e){case"application":return"Application";case"url":return"URL / Raycast Deeplink";case"folder":return"Folder";case"command":return"Shell Command";case"group":return"Group"}}var r=require("@raycast/api"),x=require("react");var p=require("react/jsx-runtime");function J({config:e,parentPath:o,itemType:n,onSave:c}){let{pop:i}=(0,r.useNavigation)(),[s,a]=(0,x.useState)(!1),[f,h]=(0,x.useState)("application"),[m,w]=(0,x.useState)([]),[S,C]=(0,x.useState)(!0),I=o.length===0?e:E(e,o);(0,x.useEffect)(()=>{async function d(){let L=await(0,r.getApplications)();L.sort((P,g)=>P.name.localeCompare(g.name)),w(L),C(!1)}d()},[]);async function D(d){a(!0);let L=d.key.slice(0,1);if(!L){await(0,r.showToast)({style:r.Toast.Style.Failure,title:"Key required",message:"Please enter a single character key"}),a(!1);return}if(I){let T=te(I,L);if(T.hasConflict){await(0,r.showToast)({style:r.Toast.Style.Failure,title:"Key conflict",message:`Key "${L}" is already used by "${T.conflictLabel}"`}),a(!1);return}}let P;if(n==="group")P={id:W(),key:L,type:"group",label:d.label||void 0,actions:[],browser:d.browser||void 0};else{let T=d.actionType==="application"?d.appValue:d.value;if(!T){await(0,r.showToast)({style:r.Toast.Style.Failure,title:"Value required",message:"Please enter a value for this action"}),a(!1);return}P={id:W(),key:L,type:d.actionType||"application",label:d.label||void 0,value:T,...d.actionType==="url"&&d.browser?{browser:d.browser}:{}}}let g=await le(e,o,P);await c(g),await(0,r.showToast)({style:r.Toast.Style.Success,title:"Item added"}),i()}let y=ge(f);return(0,p.jsxs)(r.Form,{isLoading:s||S,actions:(0,p.jsx)(r.ActionPanel,{children:(0,p.jsx)(r.Action.SubmitForm,{title:n==="group"?"Add Group":"Add Action",icon:r.Icon.Plus,onSubmit:D})}),children:[(0,p.jsx)(r.Form.TextField,{id:"key",title:"Key",placeholder:"Single character (e.g., t, o, r)",info:"The key to press to trigger this item"}),(0,p.jsx)(r.Form.TextField,{id:"label",title:"Label",placeholder:n==="group"?"e.g., Applications":"e.g., Terminal",info:"Display name for this item"}),n==="group"&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.Form.Separator,{}),(0,p.jsxs)(r.Form.Dropdown,{id:"browser",title:"Default Browser",info:"URLs in this group will open with this browser unless overridden by the individual action",children:[(0,p.jsx)(r.Form.Dropdown.Item,{value:"",title:"System Default",icon:r.Icon.Globe}),m.map(d=>(0,p.jsx)(r.Form.Dropdown.Item,{value:d.path,title:d.name,icon:{fileIcon:d.path}},d.bundleId||d.path))]})]}),n==="action"&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.Form.Separator,{}),(0,p.jsxs)(r.Form.Dropdown,{id:"actionType",title:"Action Type",defaultValue:"application",onChange:d=>h(d),children:[(0,p.jsx)(r.Form.Dropdown.Item,{value:"application",title:M("application"),icon:R("application")}),(0,p.jsx)(r.Form.Dropdown.Item,{value:"url",title:M("url"),icon:R("url")}),(0,p.jsx)(r.Form.Dropdown.Item,{value:"folder",title:M("folder"),icon:R("folder")}),(0,p.jsx)(r.Form.Dropdown.Item,{value:"command",title:M("command"),icon:R("command")})]}),f==="application"?(0,p.jsx)(r.Form.Dropdown,{id:"appValue",title:y.title,info:y.info,children:m.map(d=>(0,p.jsx)(r.Form.Dropdown.Item,{value:d.path,title:d.name,icon:{fileIcon:d.path}},d.bundleId||d.path))}):(0,p.jsx)(r.Form.TextField,{id:"value",title:y.title,placeholder:y.placeholder,info:y.info}),f==="url"&&(0,p.jsxs)(r.Form.Dropdown,{id:"browser",title:"Open With",info:"Choose which browser to open this URL with. System Default inherits from the parent group or OS default.",children:[(0,p.jsx)(r.Form.Dropdown.Item,{value:"",title:"System Default",icon:r.Icon.Globe}),m.map(d=>(0,p.jsx)(r.Form.Dropdown.Item,{value:d.path,title:d.name,icon:{fileIcon:d.path}},d.bundleId||d.path))]})]})]})}function me({config:e,itemPath:o,onSave:n}){let{pop:c}=(0,r.useNavigation)(),[i,s]=(0,x.useState)(!1),[a,f]=(0,x.useState)("application"),[h,m]=(0,x.useState)([]),[w,S]=(0,x.useState)(!0),C=o.slice(0,-1),I=o[o.length-1],D=C.length===0?e:E(e,C),y=D?.actions.find(g=>g.id===I);if((0,x.useEffect)(()=>{async function g(){let T=await(0,r.getApplications)();T.sort((F,$)=>F.name.localeCompare($.name)),m(T),S(!1)}g()},[]),(0,x.useEffect)(()=>{y&&!v(y)&&f(y.type)},[y]),!y)return null;let d=v(y);async function L(g){s(!0);let T=g.key.slice(0,1);if(!T){await(0,r.showToast)({style:r.Toast.Style.Failure,title:"Key required",message:"Please enter a single character key"}),s(!1);return}if(D&&T!==y.key){let N=te(D,T,y.id);if(N.hasConflict){await(0,r.showToast)({style:r.Toast.Style.Failure,title:"Key conflict",message:`Key "${T}" is already used by "${N.conflictLabel}"`}),s(!1);return}}let F;if(d)F={key:T,label:g.label||void 0,browser:g.browser||void 0};else{let N=g.actionType==="application"?g.appValue:g.value;if(!N){await(0,r.showToast)({style:r.Toast.Style.Failure,title:"Value required",message:"Please enter a value for this action"}),s(!1);return}F={key:T,type:g.actionType||"application",label:g.label||void 0,value:N,browser:g.actionType==="url"&&g.browser||void 0}}let $=await pe(e,o,F);await n($),await(0,r.showToast)({style:r.Toast.Style.Success,title:"Item updated"}),c()}let P=ge(a);return(0,p.jsxs)(r.Form,{isLoading:i||w,actions:(0,p.jsx)(r.ActionPanel,{children:(0,p.jsx)(r.Action.SubmitForm,{title:"Save Changes",icon:r.Icon.Check,onSubmit:L})}),children:[(0,p.jsx)(r.Form.TextField,{id:"key",title:"Key",defaultValue:y.key,placeholder:"Single character (e.g., t, o, r)",info:"The key to press to trigger this item"}),(0,p.jsx)(r.Form.TextField,{id:"label",title:"Label",defaultValue:y.label||"",placeholder:d?"e.g., Applications":"e.g., Terminal",info:"Display name for this item"}),d&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.Form.Separator,{}),(0,p.jsxs)(r.Form.Dropdown,{id:"browser",title:"Default Browser",defaultValue:y.browser||"",info:"URLs in this group will open with this browser unless overridden by the individual action",children:[(0,p.jsx)(r.Form.Dropdown.Item,{value:"",title:"System Default",icon:r.Icon.Globe}),h.map(g=>(0,p.jsx)(r.Form.Dropdown.Item,{value:g.path,title:g.name,icon:{fileIcon:g.path}},g.bundleId||g.path))]})]}),!d&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.Form.Separator,{}),(0,p.jsxs)(r.Form.Dropdown,{id:"actionType",title:"Action Type",defaultValue:y.type,onChange:g=>f(g),children:[(0,p.jsx)(r.Form.Dropdown.Item,{value:"application",title:M("application"),icon:R("application")}),(0,p.jsx)(r.Form.Dropdown.Item,{value:"url",title:M("url"),icon:R("url")}),(0,p.jsx)(r.Form.Dropdown.Item,{value:"folder",title:M("folder"),icon:R("folder")}),(0,p.jsx)(r.Form.Dropdown.Item,{value:"command",title:M("command"),icon:R("command")})]}),a==="application"?(0,p.jsx)(r.Form.Dropdown,{id:"appValue",title:P.title,defaultValue:y.value,info:P.info,children:h.map(g=>(0,p.jsx)(r.Form.Dropdown.Item,{value:g.path,title:g.name,icon:{fileIcon:g.path}},g.bundleId||g.path))}):(0,p.jsx)(r.Form.TextField,{id:"value",title:P.title,defaultValue:y.value,placeholder:P.placeholder,info:P.info}),a==="url"&&(0,p.jsxs)(r.Form.Dropdown,{id:"browser",title:"Open With",defaultValue:y.browser||"",info:"Choose which browser to open this URL with. System Default inherits from the parent group or OS default.",children:[(0,p.jsx)(r.Form.Dropdown.Item,{value:"",title:"System Default",icon:r.Icon.Globe}),h.map(g=>(0,p.jsx)(r.Form.Dropdown.Item,{value:g.path,title:g.name,icon:{fileIcon:g.path}},g.bundleId||g.path))]})]})]})}function ge(e){switch(e){case"application":return{title:"Application",placeholder:"Select an application",info:"Choose the application to open"};case"url":return{title:"URL",placeholder:"https://example.com or raycast://...",info:"The URL to open (supports raycast:// deeplinks)"};case"folder":return{title:"Folder Path",placeholder:"/path/to/folder or ~/Documents",info:"The folder path to open in file manager"};case"command":return{title:"Shell Command",placeholder:"echo 'Hello World'",info:"The shell command to execute"}}}var u=require("react/jsx-runtime"),$e="leader-key-config",Ue="key-mappings";function Be(){let e=(0,t.getPreferenceValues)();if(!e.enableTimeout)return null;let o=parseFloat(e.timeoutSeconds);return isNaN(o)?2500:Math.max(2.5,Math.min(6,o))*1e3}function qe(e,o){let n=[],c=o.toLowerCase();function i(s,a,f,h){for(let m of s){let w=[...a,m.id],S=[...f,m.key],C=[...h,m.label||m.key],I=m.label?.toLowerCase().includes(c),D=m.key.toLowerCase().includes(c),y=!v(m)&&m.value.toLowerCase().includes(c);(I||D||y)&&n.push({item:m,path:w,pathKeys:S,pathLabels:C,matchedOn:I?"label":y?"value":"key"}),v(m)&&i(m.actions,w,S,C)}}return i(e.actions,[],[],[]),n}function ye(){let[e,o]=(0,A.useState)(null),[n,c]=(0,A.useState)(!0),[i,s]=(0,A.useState)([]),[a,f]=(0,A.useState)(""),[h,m]=(0,A.useState)(!1),[w,S]=(0,A.useState)(""),[C,I]=(0,A.useState)([]),[D,y]=(0,A.useState)(""),d=(0,A.useRef)(null),{push:L}=(0,t.useNavigation)();(0,A.useEffect)(()=>{P(),s([]),f(""),m(!1),S(""),I([]),y("")},[]);async function P(){let l=await ce();o(l),c(!1)}async function g(l,b){if(await(0,t.confirmAlert)({title:"Delete Item",message:`Are you sure you want to delete "${l.label||l.key}"?${v(l)?` This will also delete ${l.actions.length} child items.`:""}`,primaryAction:{title:"Delete",style:t.Alert.ActionStyle.Destructive}})&&e){let B=await ue(e,b);await O(B),o(B),await(0,t.showToast)({style:t.Toast.Style.Success,title:"Item deleted"})}}async function T(){await(0,t.confirmAlert)({title:"Clear Configuration",message:"This will delete all your LeaderKey shortcuts. This action cannot be undone.",primaryAction:{title:"Clear",style:t.Alert.ActionStyle.Destructive}})&&(await t.LocalStorage.removeItem($e),await t.LocalStorage.removeItem(Ue),await P(),await(0,t.showToast)({style:t.Toast.Style.Success,title:"Configuration cleared",message:"All shortcuts have been deleted"}))}let F=e?i.length===0?e:E(e,i):null,$=F?.actions||[],N=ze($),U=(0,A.useMemo)(()=>!h||!e||!w?[]:qe(e,w),[h,e,w]),ne=(0,A.useCallback)(()=>{d.current&&clearTimeout(d.current);let l=Be();l!==null&&(d.current=setTimeout(()=>{f(""),s([]),m(!1),S(""),I([]),y("")},l))},[]);(0,A.useEffect)(()=>()=>{d.current&&clearTimeout(d.current)},[]);let j=(0,A.useCallback)(l=>{if(ne(),C.length>0){if(f(l),y(l),!l)return;let b=l.split(""),k=C.find(V=>V.pathKeys.length===b.length&&V.pathKeys.every((z,X)=>z===b[X])),B=C.some(V=>V.pathKeys.length>b.length&&b.every((z,X)=>V.pathKeys[X]===z));if(k&&!B){if(I([]),y(""),f(""),m(!1),v(k.item))s(k.path);else{let V=q(e,k.path);_(k.item,()=>{s([])},V)}return}!k&&!B&&b.length>0&&(f(""),y(""));return}if(h){S(l),f(l);return}if(f(l),!(!l||!F))if(l.length===1){let b=F.actions.find(k=>k.key===l);if(b)if(v(b))s([...i,b.id]),f("");else{let k=q(e,[...i,b.id]);_(b,()=>{s([]),f("")},k)}else f(""),(0,t.showToast)({style:t.Toast.Style.Failure,title:"No action assigned",message:`Key "${l}" is not bound to any action`})}else f("")},[F,i,ne,h,C]),he=(0,A.useCallback)(()=>{if(C.length>0){I([]),y(""),f(""),m(!0),S("");return}if(h){m(!1),S(""),f("");return}i.length>0&&(s(i.slice(0,-1)),f(""))},[i,h,C]),ie=(0,A.useCallback)(()=>{m(!0),S(""),f("")},[]),H=(0,A.useCallback)(()=>{m(!1),S(""),f(""),I([]),y("")},[]),be=(0,A.useCallback)(()=>{U.length!==0&&(I(U),S(""),f(""),y(""))},[U]),we=(0,A.useCallback)(()=>{I([]),y(""),f(""),m(!0),S("")},[]),Ae=(0,A.useCallback)(l=>{if(I([]),y(""),f(""),m(!1),v(l.item))s(l.path);else{let b=q(e,l.path);_(l.item,()=>{s([])},b)}},[e]),Se=(0,A.useCallback)(l=>{if(m(!1),S(""),f(""),v(l.item))s(l.path);else{let b=l.path.slice(0,-1);s(b)}},[]),re=(0,A.useCallback)(l=>{m(!1),S(""),f(""),I([]),y("");let b=l.path.slice(0,-1);s(b)},[]),Ie=We(e,i),Q=()=>{if(C.length>0){let l=C.slice(0,3).map(k=>k.pathKeys.join("")).join(", "),b=C.length>3?"...":"";return`Type key sequence (${l}${b}) - Tab to go back`}return h?"(Search -> Use \u2318\u21B5 to continue using Key sequence after search, Tab to exit search)":i.length>0?`${Ie} \u2192 Input a key | Use "Tab" to search`:'Input a key | Use "Tab" to search'};return C.length>0&&e?(0,u.jsx)(t.List,{isLoading:n,searchText:a,onSearchTextChange:j,searchBarPlaceholder:Q(),throttle:!1,filtering:!1,children:(0,u.jsx)(t.List.Section,{title:"Type Key Sequence",subtitle:`${C.length} results \u2022 ${D||"waiting..."}`,children:C.map(l=>(0,u.jsx)(Je,{result:l,currentSequence:D,onExit:we,onExecute:()=>Ae(l),onGoToParent:()=>re(l)},l.path.join("-")))})}):h&&e?(0,u.jsx)(t.List,{isLoading:n,searchText:a,onSearchTextChange:j,searchBarPlaceholder:Q(),throttle:!1,filtering:!1,children:U.length>0?(0,u.jsx)(t.List.Section,{title:"Search Results",subtitle:`${U.length}`,children:U.map(l=>(0,u.jsx)(_e,{result:l,onSelect:()=>Se(l),onExitSearch:H,onConfirmSearch:be,onGoToParent:()=>re(l)},l.path.join("-")))}):w?(0,u.jsx)(t.List.EmptyView,{icon:t.Icon.MagnifyingGlass,title:"No results found",description:`No items match "${w}". Press Tab to exit search.`,actions:(0,u.jsx)(t.ActionPanel,{children:(0,u.jsx)(t.Action,{title:"Exit Search",icon:t.Icon.ArrowLeft,shortcut:{modifiers:[],key:"tab"},onAction:H})})}):(0,u.jsx)(t.List.EmptyView,{icon:t.Icon.MagnifyingGlass,title:"Search Mode",description:"Type to search. Press \u2318\u21B5 to lock results and type key sequence. Tab to exit.",actions:(0,u.jsx)(t.ActionPanel,{children:(0,u.jsx)(t.Action,{title:"Exit Search",icon:t.Icon.ArrowLeft,shortcut:{modifiers:[],key:"tab"},onAction:H})})})}):(0,u.jsxs)(t.List,{isLoading:n,searchText:a,onSearchTextChange:j,searchBarPlaceholder:Q(),throttle:!1,children:[N.map(l=>(0,u.jsx)(t.List.Section,{title:l.label,subtitle:`${l.items.length}`,children:l.items.map(b=>(0,u.jsx)(Ye,{item:b,config:e,currentPath:i,onSelect:()=>{if(v(b))s([...i,b.id]),f("");else{let k=q(e,[...i,b.id]);_(b,()=>{s([]),f("")},k)}},onGoBack:i.length>0?he:void 0,onDelete:()=>g(b,[...i,b.id]),onConfigUpdate:k=>o(k),onClearConfig:T,onEnterSearchMode:ie,push:L},b.id))},l.type)),$.length===0&&!n&&(0,u.jsx)(t.List.EmptyView,{icon:t.Icon.Folder,title:"Empty group",description:"Press \u2318N to add an action, \u2318\u21E7N for a group, or Tab to search",actions:(0,u.jsxs)(t.ActionPanel,{children:[(0,u.jsx)(t.Action,{title:"Search",icon:t.Icon.MagnifyingGlass,shortcut:{modifiers:[],key:"tab"},onAction:ie}),(0,u.jsx)(t.Action,{title:"Add Action",icon:t.Icon.Plus,shortcut:{modifiers:["cmd"],key:"n"},onAction:()=>L((0,u.jsx)(J,{config:e,parentPath:i,itemType:"action",onSave:async l=>{await O(l),o(l)}}))}),(0,u.jsx)(t.Action,{title:"Add Group",icon:t.Icon.Folder,shortcut:{modifiers:["cmd","shift"],key:"n"},onAction:()=>L((0,u.jsx)(J,{config:e,parentPath:i,itemType:"group",onSave:async l=>{await O(l),o(l)}}))}),(0,u.jsx)(t.Action,{title:"Clear All Configuration",icon:t.Icon.Trash,style:t.Action.Style.Destructive,onAction:T})]})})]})}function _e({result:e,onSelect:o,onExitSearch:n,onConfirmSearch:c,onGoToParent:i}){let s=v(e.item),a=e.item;function f(){return s?t.Icon.Folder:a.type==="application"?{fileIcon:a.value}:R(a.type)}let h=e.pathKeys.join(" \u2192 "),m=e.path.length>1,w=e.pathLabels.length>1?e.pathLabels[e.pathLabels.length-2]:"Root";return(0,u.jsx)(t.List.Item,{icon:f(),title:e.item.label||e.item.key,subtitle:s?`${e.item.actions.length} items`:oe(a),accessories:[{tag:{value:h,color:t.Color.Blue}}],actions:(0,u.jsxs)(t.ActionPanel,{children:[(0,u.jsx)(t.Action,{title:s?"Go to Group":"Execute",icon:t.Icon.ArrowRight,onAction:o}),(0,u.jsx)(t.Action,{title:"Type Keys",icon:t.Icon.Keyboard,shortcut:{modifiers:["cmd"],key:"enter"},onAction:c}),(0,u.jsx)(t.Action,{title:m?`Go to Parent (${w})`:"Go to Root",icon:t.Icon.ArrowUp,shortcut:{modifiers:["cmd","shift"],key:"p"},onAction:i}),(0,u.jsx)(t.Action,{title:"Exit Search",icon:t.Icon.ArrowLeft,shortcut:{modifiers:[],key:"tab"},onAction:n})]})})}function Je({result:e,currentSequence:o,onExit:n,onExecute:c,onGoToParent:i}){let s=v(e.item),a=e.item;function f(){return s?t.Icon.Folder:a.type==="application"?{fileIcon:a.value}:R(a.type)}let h=e.pathKeys.join(""),m=o===h,w=o.length>0&&h.startsWith(o),S=e.path.length>1,C=e.pathLabels.length>1?e.pathLabels[e.pathLabels.length-2]:"Root";return(0,u.jsx)(t.List.Item,{icon:f(),title:e.item.label||e.item.key,subtitle:s?`${e.item.actions.length} items`:oe(a),accessories:[{tag:{value:h,color:m?t.Color.Green:w?t.Color.Yellow:t.Color.Blue}}],actions:(0,u.jsxs)(t.ActionPanel,{children:[m&&(0,u.jsx)(t.Action,{title:s?"Go to Group":"Execute",icon:s?t.Icon.Folder:t.Icon.Play,onAction:c}),(0,u.jsx)(t.Action,{title:S?`Go to Parent (${C})`:"Go to Root",icon:t.Icon.ArrowUp,shortcut:{modifiers:["cmd","shift"],key:"p"},onAction:i}),(0,u.jsx)(t.Action,{title:"Back to Search",icon:t.Icon.ArrowLeft,shortcut:{modifiers:[],key:"tab"},onAction:n})]})})}function Ye({item:e,config:o,currentPath:n,onSelect:c,onGoBack:i,onDelete:s,onConfigUpdate:a,onClearConfig:f,onEnterSearchMode:h,push:m}){let w=v(e),S=e;function C(){return w?t.Icon.Folder:S.type==="application"?{fileIcon:S.value}:R(S.type)}return(0,u.jsx)(t.List.Item,{icon:C(),title:e.label||"",subtitle:w?`${e.actions.length} items`:oe(S),accessories:[{tag:{value:e.key,color:t.Color.Blue}}],actions:(0,u.jsxs)(t.ActionPanel,{children:[(0,u.jsx)(t.Action,{title:w?"Open Group":"Execute",icon:w?t.Icon.Folder:t.Icon.Play,onAction:c}),(0,u.jsx)(t.Action,{title:"Search",icon:t.Icon.MagnifyingGlass,shortcut:{modifiers:[],key:"tab"},onAction:h}),i&&(0,u.jsx)(t.Action,{title:"Go Back",icon:t.Icon.ArrowLeft,shortcut:{modifiers:[],key:"backspace"},onAction:i}),(0,u.jsxs)(t.ActionPanel.Section,{title:"Edit",children:[(0,u.jsx)(t.Action,{title:"Edit Item",icon:t.Icon.Pencil,shortcut:{modifiers:["cmd"],key:"e"},onAction:()=>m((0,u.jsx)(me,{config:o,itemPath:[...n,e.id],onSave:async I=>{await O(I),a(I)}}))}),(0,u.jsx)(t.Action,{title:"Delete Item",icon:t.Icon.Trash,style:t.Action.Style.Destructive,shortcut:{modifiers:["cmd"],key:"backspace"},onAction:s})]}),(0,u.jsxs)(t.ActionPanel.Section,{title:"Add",children:[(0,u.jsx)(t.Action,{title:"Add Action",icon:t.Icon.Plus,shortcut:{modifiers:["cmd"],key:"n"},onAction:()=>m((0,u.jsx)(J,{config:o,parentPath:n,itemType:"action",onSave:async I=>{await O(I),a(I)}}))}),(0,u.jsx)(t.Action,{title:"Add Group",icon:t.Icon.Folder,shortcut:{modifiers:["cmd","shift"],key:"n"},onAction:()=>m((0,u.jsx)(J,{config:o,parentPath:n,itemType:"group",onSave:async I=>{await O(I),a(I)}}))})]}),!w&&(0,u.jsx)(t.Action.CopyToClipboard,{title:"Copy Value",content:S.value,shortcut:{modifiers:["cmd"],key:"c"}}),(0,u.jsx)(t.ActionPanel.Section,{title:"Configuration",children:(0,u.jsx)(t.Action,{title:"Clear All Configuration",icon:t.Icon.Trash,style:t.Action.Style.Destructive,onAction:f})})]})})}function We(e,o){if(!e||o.length===0)return"";let n=[],c=e;for(let i of o){let s=c.actions.find(a=>a.id===i);s&&v(s)&&(n.push(s.label||s.key),c=s)}return n.join(" \u2192 ")}function oe(e){let{type:o,value:n}=e;switch(o){case"application":return n.split("/").pop()?.replace(".app","")||n;case"url":return n.startsWith("raycast://")?"Raycast: "+n.split("/").pop():n.length>40?n.substring(0,37)+"...":n;case"folder":return n.split("/").pop()||n;case"command":return n.length>40?n.substring(0,37)+"...":n;default:return n}}var je=["group","application","url","folder","command"],He={group:"Groups",application:"Applications",url:"URLs",folder:"Folders",command:"Commands"};function Qe(e,o){return e.key.localeCompare(o.key)}function ze(e){let o=new Map;for(let c of e){let i=c.type,s=o.get(i)||[];s.push(c),o.set(i,s)}let n=[];for(let c of je){let i=o.get(c);i&&i.length>0&&n.push({type:c,label:He[c],items:i.sort(Qe)})}return n}
